#include	"table.h"

/*	BC(2,1) table for
		S -> E
		E -> E+T
		E -> T
		T -> T*F
		T -> F
		F -> n
		F -> (E)
	hand-derived.
*/
const struct entry table[] = {
	{'#', 'S', '#', ACCEPT, ""},
	{'#', 'S', '+', IERROR, ""},
	{'#', 'S', '*', IERROR, ""},
	{'#', 'S', 'n', IERROR, ""},
	{'#', 'S', '(', IERROR, ""},
	{'#', 'S', ')', IERROR, ""},

	{'#', 'E', '#', 'S', "E"},
	{'#', 'E', '+', SHIFT, ""},
	{'#', 'E', '*', IERROR, ""},
	{'#', 'E', 'n', IERROR, ""},
	{'#', 'E', '(', IERROR, ""},
	{'#', 'E', ')', SERROR, ""},

	{'#', 'T', '#', 'E', "T"},
	{'#', 'T', '+', 'E', "T"},
	{'#', 'T', '*', SHIFT, ""},
	{'#', 'T', 'n', IERROR, ""},
	{'#', 'T', '(', IERROR, ""},
	{'#', 'T', ')', SERROR, ""},

	{'#', 'F', '#', 'T', "F"},
	{'#', 'F', '+', 'T', "F"},
	{'#', 'F', '*', 'T', "F"},
	{'#', 'F', 'n', IERROR, ""},
	{'#', 'F', '(', IERROR, ""},
	{'#', 'F', ')', SERROR, ""},

	{'#', 'n', '#', 'F', "n"},
	{'#', 'n', '+', 'F', "n"},
	{'#', 'n', '*', 'F', "n"},
	{'#', 'n', 'n', SERROR, ""},
	{'#', 'n', '(', SERROR, ""},
	{'#', 'n', ')', SERROR, ""},

	{'#', '(', '#', SERROR, ""},
	{'#', '(', '+', SERROR, ""},
	{'#', '(', '*', SERROR, ""},
	{'#', '(', 'n', SHIFT, ""},
	{'#', '(', '(', SHIFT, ""},
	{'#', '(', ')', SERROR, ""},

	{'E', '+', '#', SERROR, ""},
	{'E', '+', '+', SERROR, ""},
	{'E', '+', '*', SERROR, ""},
	{'E', '+', 'n', SHIFT, ""},
	{'E', '+', '(', SHIFT, ""},
	{'E', '+', ')', SERROR, ""},

	{'E', ')', '#', 'F', "(E)"},
	{'E', ')', '+', 'F', "(E)"},
	{'E', ')', '*', 'F', "(E)"},
	{'E', ')', 'n', SERROR, ""},
	{'E', ')', '(', SERROR, ""},
	{'E', ')', ')', 'F', "(E)"},

	{'T', '*', '#', SERROR, ""},
	{'T', '*', '+', SERROR, ""},
	{'T', '*', '*', SERROR, ""},
	{'T', '*', 'n', SHIFT, ""},
	{'T', '*', '(', SHIFT, ""},
	{'T', '*', ')', SERROR, ""},

	{'+', 'T', '#', 'E', "E+T"},
	{'+', 'T', '+', 'E', "E+T"},
	{'+', 'T', '*', SHIFT, ""},
	{'+', 'T', 'n', IERROR, ""},
	{'+', 'T', '(', IERROR, ""},
	{'+', 'T', ')', 'E', "E+T"},

	{'+', 'F', '#', 'T', "F"},
	{'+', 'F', '+', 'T', "F"},
	{'+', 'F', '*', 'T', "F"},
	{'+', 'F', 'n', IERROR, ""},
	{'+', 'F', '(', IERROR, ""},
	{'+', 'F', ')', 'T', "F"},

	{'+', 'n', '#', 'F', "n"},
	{'+', 'n', '+', 'F', "n"},
	{'+', 'n', '*', 'F', "n"},
	{'+', 'n', 'n', SERROR, ""},
	{'+', 'n', '(', SERROR, ""},
	{'+', 'n', ')', 'F', "n"},

	{'+', '(', '#', SERROR, ""},
	{'+', '(', '+', SERROR, ""},
	{'+', '(', '*', SERROR, ""},
	{'+', '(', 'n', SHIFT, ""},
	{'+', '(', '(', SHIFT, ""},
	{'+', '(', ')', SERROR, ""},

	{'*', 'F', '#', 'T', "T*F"},
	{'*', 'F', '+', 'T', "T*F"},
	{'*', 'F', '*', 'T', "T*F"},
	{'*', 'F', 'n', IERROR, ""},
	{'*', 'F', '(', IERROR, ""},
	{'*', 'F', ')', 'T', "T*F"},

	{'*', 'n', '#', 'F', "n"},
	{'*', 'n', '+', 'F', "n"},
	{'*', 'n', '*', 'F', "n"},
	{'*', 'n', 'n', SERROR, ""},
	{'*', 'n', '(', SERROR, ""},
	{'*', 'n', ')', 'F', "n"},

	{'*', '(', '#', SERROR, ""},
	{'*', '(', '+', SERROR, ""},
	{'*', '(', '*', SERROR, ""},
	{'*', '(', 'n', SHIFT, ""},
	{'*', '(', '(', SHIFT, ""},
	{'*', '(', ')', SERROR, ""},

	{'(', 'E', '#', SERROR, ""},
	{'(', 'E', '+', SHIFT, ""},
	{'(', 'E', '*', IERROR, ""},
	{'(', 'E', 'n', IERROR, ""},
	{'(', 'E', '(', IERROR, ""},
	{'(', 'E', ')', SHIFT, ""},

	{'(', 'T', '#', SERROR, ""},
	{'(', 'T', '+', 'E', "T"},
	{'(', 'T', '*', SHIFT, ""},
	{'(', 'T', 'n', IERROR, ""},
	{'(', 'T', '(', IERROR, ""},
	{'(', 'T', ')', 'E', "T"},

	{'(', 'F', '#', SERROR, ""},
	{'(', 'F', '+', 'T', "F"},
	{'(', 'F', '*', 'T', "F"},
	{'(', 'F', 'n', IERROR, ""},
	{'(', 'F', '(', IERROR, ""},
	{'(', 'F', ')', 'T', "F"},

	{'(', 'n', '#', SERROR, ""},
	{'(', 'n', '+', 'F', "n"},
	{'(', 'n', '*', 'F', "n"},
	{'(', 'n', 'n', SERROR, ""},
	{'(', 'n', '(', SERROR, ""},
	{'(', 'n', ')', 'F', "n"},

	{'(', '(', '#', SERROR, ""},
	{'(', '(', '+', SERROR, ""},
	{'(', '(', '*', SERROR, ""},
	{'(', '(', 'n', SHIFT, ""},
	{'(', '(', '(', SHIFT, ""},
	{'(', '(', ')', SERROR, ""},
};

int tabsize = (sizeof table / sizeof table[0]);

